#Author: xSilas43
#Credits: Awesome Scripts - Alcolawl, Idea - SoniCron & Jimsilver73, Kernel - DespairFactor
#Device: angler
#Codename: BioThrawn
#Build: Beta
#Version:1
#Updated 23/1/2016
#Notes: Please give credit when using this in your work!

echo You must be running Kylo Kernel or a Kernel with despair cpu gov

echo ----------------------------------------------------------
echo start 'BioThrawn' 
echo ----------------------------------------------------------

echo Set IO Scheduler and Read ahead value

echo fiops > /sys/block/mmcblk0/queue/scheduler
echo 1024 > /sys/block/mmcblk0/queue/read_ahead_kb

#turn on all cores
chmod 644 /sys/devices/system/cpu/online
echo 0-7 > /sys/devices/system/cpu/online
chmod 444 /sys/devices/system/cpu/online
echo 1 > /sys/devices/system/cpu/cpu0/online
echo 1 > /sys/devices/system/cpu/cpu1/online
echo 1 > /sys/devices/system/cpu/cpu2/online
echo 1 > /sys/devices/system/cpu/cpu3/online
echo 1 > /sys/devices/system/cpu/cpu4/online
echo 1 > /sys/devices/system/cpu/cpu5/online
echo 1 > /sys/devices/system/cpu/cpu6/online
echo 1 > /sys/devices/system/cpu/cpu7/online

#Little Settings
echo Applying settings to LITTLE CPU 384 mhz min - 1555mhz max
#Set despair gov
chmod 644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
echo despair > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
chmod 444 /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
chmod 644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
echo 384000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
chmod 444 /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
chmod 644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
echo 1555200 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
chmod 444 /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
#Tweak despair gov
echo 80 > /sys/devices/system/cpu/cpu0/cpufreq/despair/down_threshold
echo 0 > /sys/devices/system/cpu/cpu0/cpufreq/despair/ignore_nice_load
echo 25000 > /sys/devices/system/cpu/cpu0/cpufreq/despair/sampling_rate
chmod 644 /sys/devices/system/cpu/cpu0/cpufreq/despair/sampling_rate_min
echo 80000 > /sys/devices/system/cpu/cpu0/cpufreq/despair/sampling_rate_min
chmod 444 /sys/devices/system/cpu/cpu0/cpufreq/despair/sampling_rate_min
echo 85 > /sys/devices/system/cpu/cpu0/cpufreq/despair/twostep_threshold
echo 5 > /sys/devices/system/cpu/cpu0/cpufreq/despair/freq_step
echo 2 > /sys/devices/system/cpu/cpu0/cpufreq/despair/sampling_down_factor
echo 90 > /sys/devices/system/cpu/cpu0/cpufreq/despair/up_threshold

#Big Settings
echo Applying settings to big CPU
#Set Bioshock gov 633mhz min - 1958mhz max
echo 1 > /sys/devices/system/cpu/cpu4/online
chmod 644 /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
echo bioshock > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
chmod 444 /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
chmod 644 /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq
echo 633000 > /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq
chmod 444 /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq
chmod 644 /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
echo 1958400 > /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
chmod 444 /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq


echo Applying LITTLE CPU Input Boost @ 1344MHz for 40ms
echo 0:1344000 1:0 2:0 3:0 4:0 5:0 6:0 7:0 > /sys/module/cpu_boost/parameters/input_boost_freq
echo 0 > /sys/module/cpu_boost/parameters/boost_ms
echo 40 > /sys/module/cpu_boost/parameters/input_boost_ms

echo Finishing up
#disable touchboot
echo 0 > /sys/module/msm_performance/parameters/touchboost

#Disabling Core Control and enabling Thermal Throttling
echo 0 > /sys/module/msm_thermal/core_control/enabled
echo Y > /sys/module/msm_thermal/parameters/enabled

echo -------------------------------------------------------------------------------------------------------------------------------------
echo Finished executing the script, if there were any errors let xSilas43 know
echo You can now tweak to your liking and save it as a profile in your prefered Kernel Tweaking App
echo -------------------------------------------------------------------------------------------------------------------------------------

